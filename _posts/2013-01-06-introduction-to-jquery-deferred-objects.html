---
layout: post
title: Introduction to jQuery deferred objects
date: 2013-01-06
comments: false
legacy: true
---

<h1>{{ page.title }}</h1>
<div class='post'>
<a href="http://api.jquery.com/category/deferred-object/">Deferred objects</a> in jQuery are a concise and readable way to handle multiple asynchronous calls. For example they allow you to avoid nested ajax calls like this:<br /><pre class="brush: javascript">$.get("http://jsonip.com", function (response1) {<br />    // Get another resource, but just use jsonip.com again as an example.<br />    $.get("http://jsonip.com", function (response2) {<br />        console.log("We know have both response and can continue:");<br />        console.log("Response1: ", response1);<br />        console.log("Response2: ", response2);<br />    });<br />});</pre>Which will show this in the console:<br /><pre>We know have both response and can continue:<br />Response1:  Object {ip: "xx.abc.e.fgh", about: "/about"}<br />Response2:  Object {ip: "xx.abc.d.fgh", about: "/about"} </pre>The code can be rewritten using deferred objects. Another advantage of this is that both ajax calls are made at the same time, avoiding waiting times:<br /><pre class="brush: javascript">var request1 = $.get("http://jsonip.com");<br />var request2 = $.get("http://jsonip.com");<br />$.when(request1, request2).then(function (response1, response2) {<br />    console.log("We know have both response and can continue:");<br />    console.log("Response1: ", response1[0]);<br />    console.log("Response2: ", response2[0]);<br />});</pre><h3>How does it work?</h3>The return value of &nbsp;<code>$.get</code> is a promise object that is assigned to the variables <code>request1</code> and <code>request2</code>. When the response is available the promise object will be marked as resolved.<br /><br /><code>$.when</code> also returns a promise object, grouping the two requests. It will mark itself as resolved when both requests that were passed as arguments have been marked as resolved.<br /><br />Promise objects provide a subset of the functionality of deferred objects. A deferred object can be <a href="http://api.jquery.com/deferred.resolve/">marked as resolved explicitly</a> while a promise object only provides methods for observers.<br /><br /><span style="font-size: x-small;">(Strictly speaking <code>$.get</code> or <code>$.ajax</code> don't return a promise object but a <a href="http://api.jquery.com/jQuery.ajax/#jqXHR">jqXHR object</a> which is a superset of a promise object.)</span><br /><h3>Other handler functions</h3>The promise object functions are <code>then, done, always, fail and pip</code>. <code>fail</code> and <code>always</code> allow you to deal with errors that&nbsp;occurred&nbsp;when the request was made. <code><a href="http://api.jquery.com/deferred.pipe/">pipe</a></code> let's you modify the return value of the request before passing it to other handlers.<br /><h3>Alternative callback and control flow libraries</h3><div>There are some libraries that focus exclusively on facilitating asynchronous control flow. DailyJS has <a href="http://dailyjs.com/2012/02/20/new-flow-control-libraries/">a list</a>.</div><h3>Learn more</h3><div>We didn't actually use full-fledged deferred objects in this post - just promise objects. <a href="http://blog.mostlystatic.com/2013/01/using-deferred-objects-in-your-own.html">Learn how to use deferred objects for your own components</a>.</div><div><br /></div><br /></div>
<h2>Comments</h2>
<div class='comments'>
</div>
