---
layout: post
title: gRaphael pie chart example
date: 2012-09-20
comments: false
legacy: true
---

<h1>{{ page.title }}</h1>
<div class='post'>
Because of the lack of documentation on <a href="http://g.raphaeljs.com/">gRaphael</a> I've already written a <a href="http://blog.mostlystatic.com/2012/06/simple-line-chart-with-graphael-05.html">tutorial for a line chart</a>. This post will do the same for pie charts and show some of the ways to customize them.<br /><h3>A simple pie chart</h3><div>First we need to include 3 Javascript files for Raphael and gRaphael. I've also added jQuery because we'll use it later.</div><div></div><div><pre class="brush: html">&lt;script src="raphael-min.js"&gt;&lt;/script&gt;<br />&lt;script src="g.raphael-min.js"&gt;&lt;/script&gt;<br />&lt;script src="g.pie-min.js"&gt;&lt;/script&gt;<br />&lt;script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"&gt;&lt;/script&gt;<br /><br />&lt;div id="pie"&gt;&lt;/div&gt;<br />&lt;script&gt;<br /> var paper = Raphael("pie");<br /> paper.piechart(<br />   100, // pie center x coordinate<br />   100, // pie center y coordinate<br />   90,  // pie radius<br />    [18.373, 18.686, 2.867, 23.991, 9.592, 9.213] // values<br />  );<br />&lt;/script&gt;<br /></pre><div></div><div>Even though the gRaphael front page says to use <code>paper.g.piechart</code> make sure to use <code>paper.piechart</code>, or you'll get a type error: "Cannot call method 'piechart' of undefined&nbsp;".&nbsp;</div><div><br /></div><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-NfOu7TvvFYA/UFo7UPDp3kI/AAAAAAAAABo/k3m20epzVWE/s1600/pie.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://2.bp.blogspot.com/-NfOu7TvvFYA/UFo7UPDp3kI/AAAAAAAAABo/k3m20epzVWE/s1600/pie.png" /></a></div><div class="separator" style="clear: both; text-align: center;"><br /></div><h3>Adding a legend</h3><div>The chart above shows Microsoft's revenue breakdown between mid-2011 and mid-2012<sup>*</sup>. We can add a legend by adding an options object as the last argument to `piechart`:<br /><pre class="brush: javascript"> var paper = Raphael("pie");<br /> paper.piechart(<br />   100, // pie center x coordinate<br />   100, // pie center y coordinate<br />   90,  // pie radius<br />    [18.373, 18.686, 2.867, 23.991, 9.592, 0.213], // values<br />    {<br />    legend: ["Windows/Windows Live", "Server/Tools", "Online Services", "Business", "Entertainment/Devices", "Unallocated/Other"]<br />    }<br />  );<br /></pre></div><div></div><div><div class="reference"><sup>*</sup> At least I think so, and I'm no good thinking about finance. Taken from <a href="http://www.microsoft.com/investor/EarningsAndFinancials/Earnings/PressReleaseAndWebcast/FY12/Q4/default.aspx">Microsoft Earnings Release FY12 Q4</a>.</div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-YpF333Yjs8Y/UFo9EHCpRQI/AAAAAAAAABw/kiZPgngV27Y/s1600/pie-legend.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="173" src="http://4.bp.blogspot.com/-YpF333Yjs8Y/UFo9EHCpRQI/AAAAAAAAABw/kiZPgngV27Y/s320/pie-legend.png" width="320" /></a></div><div class="separator" style="clear: both; text-align: left;">You'll notice that the segments are ordered by their values in descending order. &nbsp;As far as I know there is no option to turn that off.</div><h3>Customizing segment colors</h3><div>The colors option is very similar to the legend one:</div><div></div><div><pre class="brush: javascript"> var paper = Raphael("pie");<br /> paper.piechart(<br />   100, // pie center x coordinate<br />   100, // pie center y coordinate<br />   90,  // pie radius<br />    [18.373, 18.686, 2.867, 23.991, 9.592, 0.213], // values<br />    {<br />    legend: ["Windows/Windows Live", "Server/Tools", "Online Services", "Business", "Entertainment/Devices", "Unallocated/Other"],<br />    colors: ["#000038", "#000066", "#0000ff", "#c7c7ff", "#a4a4b7", "#e0e0ef"]<br />    }<br />  );<br /></pre></div><div></div><div>Someone with design skills might even make it look better than the original one...</div><div><br /></div><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-PB0xORx-iKg/UFpACFKzMhI/AAAAAAAAACA/PXVMR_dLtM0/s1600/pie-colors.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="168" src="http://4.bp.blogspot.com/-PB0xORx-iKg/UFpACFKzMhI/AAAAAAAAACA/PXVMR_dLtM0/s320/pie-colors.png" width="320" /></a></div><h3>Other section and the maxSlices option</h3><div>When there are values that would require lots of small segments gRaphael will merge them into one "Others" segment. Say Microsoft would start divisions for strawberries and carrots:</div><div></div><div><pre class="brush: javascript">var paper = Raphael("pie");<br /> paper.piechart(<br />   100, // pie center x coordinate<br />   100, // pie center y coordinate<br />   90,  // pie radius<br />    [18.373, 18.686, 2.867, 23.991, 9.592, 0.213, .111, .222], // values<br />    {<br />    legend: ["Windows/Windows Live", "Server/Tools", "Online Services", "Business", "Entertainment/Devices", "Unallocated/Other", "Strawberries", "Carrots"],<br />    colors: ["#000038", "#000066", "#0000ff", "#c7c7ff", "#a4a4b7", "#e0e0ef", "green", "red"]<br />    }<br />  );</pre></div><div></div><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-FBPqfMjR_XM/UFpDBFd4RtI/AAAAAAAAACQ/ljP5bVBbh9k/s1600/pie-others.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="169" src="http://3.bp.blogspot.com/-FBPqfMjR_XM/UFpDBFd4RtI/AAAAAAAAACQ/ljP5bVBbh9k/s320/pie-others.png" width="320" /></a></div><div>You can change the text to "Other" by using the legendothers option.<br /><br />maxSlices can be used to collapse additional segments into "Other".</div><div></div><div><pre class="brush: javascript"> var paper = Raphael("pie");<br /> paper.piechart(<br />   100, // pie center x coordinate<br />   100, // pie center y coordinate<br />   90,  // pie radius<br />    [18.373, 18.686, 2.867, 23.991, 9.592, 0.213, .111, .222], // values<br />    {<br />    legend: ["Windows/Windows Live", "Server/Tools", "Online Services", "Business", "Entertainment/Devices", "Unallocated/Other", "Strawberries", "Carrots"],<br />    colors: ["#000038", "#000066", "#0000ff", "#c7c7ff", "#a4a4b7", "#e0e0ef", "green", "red"],<br />    legendothers: "Other",<br />    maxSlices: 3<br />    }<br />  );<br /></pre></div><div></div><div><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-4CY7yK9vzyg/UFpEW1SpOoI/AAAAAAAAACY/GEWHXsxy_3Y/s1600/pie-maxslices.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="162" src="http://2.bp.blogspot.com/-4CY7yK9vzyg/UFpEW1SpOoI/AAAAAAAAACY/GEWHXsxy_3Y/s320/pie-maxslices.png" width="320" /></a></div><br /></div></div></div></div>
<h2>Comments</h2>
<div class='comments'>
</div>
