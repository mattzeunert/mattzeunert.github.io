---
layout: post
title: Making a gRapahel pie chart interactive using .hover()
date: 2012-09-30
comments: false
legacy: true
---

<h1>{{ page.title }}</h1>
<div class='post'>
In my last post I showed how to <a href="http://blog.mostlystatic.com/2012/09/graphael-pie-chart-example.html">create a static pie chart in gRaphael</a>. To make it dynamic you can use the <code>hover</code> function like this:  <br /><pre class="brush: javascript">pieChart.hover(mouseoverHandler, mouseoutHandler);<br /></pre>The execution context (<code>this</code>) within the handler functions is set to an object giving information about the segment. These are some of the object's properties:  <br /><table border="1" style="border-collapse: collapse; border-color: #ccc;"> <thead><tr><th>Property name</th>  <th>Value</th> </tr></thead> <tbody><tr><td>label   </td>  <td>Array of Raphael components of the legend element of the segment. The first value in the list is the circle in front of the segment name, the second is the text element for the segment name.   </td> </tr><tr><td>sector</td><td>The actual Rapahel object for the segment the user's cursor is hovering over.</td></tr><tr><td>total</td><td>The accumulated value of all segments in the chart.</td></tr><td>value</td><td>An object where the <code>value</code> property is the absolute numerical value represented by the segment. The <code>order</code> field gives the index of the value as in the array passed to the <code>.piechart()</code> method as the fourth parameter. </td></tr></tbody></table><br />So you can show more detail on the item like this:  <br /><pre class="brush: javascript">&lt;script src="raphael-min.js"&gt;&lt;/script&gt;<br />&lt;script src="g.raphael-min.js"&gt;&lt;/script&gt;<br />&lt;script src="g.pie-min.js"&gt;&lt;/script&gt;<br />&lt;script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"&gt;&lt;/script&gt;<br /><br />&lt;div id="pie"&gt;&lt;/div&gt;<br />&lt;div id="details"&gt;&lt;/div&gt;<br />&lt;script&gt;<br /> //Specify an explicit width, otherwise our #details div would be too far down the page<br /> var paper = Raphael("pie", 400, 200);<br /> var pie = paper.piechart(<br />   100, // pie center x coordinate<br />   100, // pie center y coordinate<br />   90,  // pie radius<br />    [18.373, 18.686, 2.867, 23.991, 9.592, 0.213], // values<br />    {<br />    legend: ["Windows/Windows Live", "Server/Tools", "Online Services", "Business", "Entertainment/Devices", "Unallocated/Other"]<br />    }<br />  );<br /> var divisionDetails = ["Windows details", "Server details", "Business details", "Entertainment details", "Other details"];<br /> pie.hover(function(){<br />  var info = [<br />   "&lt;b&gt;" + this.label[1].attrs["text"] + "&lt;/b&gt;",<br />   divisionDetails[this.value.order],<br />   "Revenue: " + this.value.value + "B"<br />  ].join("&lt;br&gt;"); // So we'll have three lines, one for each of the info items above.<br />  $("#details").html(info);<br /> }, function(){<br />  $("#details").html("");<br /> });<br />&lt;/script&gt;<br /></pre><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-DgJumC5nGFg/UF9w5yqO4II/AAAAAAAAACo/0jZS4qpFGlU/s1600/pie-business-hover.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="222" src="http://4.bp.blogspot.com/-DgJumC5nGFg/UF9w5yqO4II/AAAAAAAAACo/0jZS4qpFGlU/s320/pie-business-hover.png" width="320" /></a></div>This is how it shows up when the user moves the mouse cursor over the "Business" segment. <h3>Emphasizing the segment that is being hovered over and it's legend item</h3>To achieve this we can modify the text's "font-weight" property in the hover handlers: <br /><pre class="brush: javascript"> pie.hover(function(){<br />  // info code from above<br />  this.label[1].attr({"font-weight": "bold"});<br /> }, function(){<br />  $("#details").html("");<br />  this.label[1].attr({"font-weight": "normal"});<br /> });<br /></pre>This is very similar to the <a href="http://g.raphaeljs.com/piechart2.html">interactive pie chart example on the gRaphael website</a>. If you want to duplicate the animation on that page have a look at the source code there. An alternative might be to change the color of the segment and its legend item:  <br /><pre class="brush: javascript"> pie.hover(function(){<br />  var info = /..<br />  $("#details").html(info);<br />  this.label[1].attr({"font-weight": "bold"});<br />  this.label[0].darker();<br />  this.sector.darker();<br /> }, function(){<br />  $("#details").html("");<br />  this.label[1].attr({"font-weight": "normal"});<br />  this.label[0].resetBrightness();<br />  this.sector.resetBrightness();<br /> });<br /></pre><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-FpGYRLbNdO0/UF91HlCqJBI/AAAAAAAAAC4/eil1K7dIPQE/s1600/pie-hover-segment-emphasized.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="227" src="http://1.bp.blogspot.com/-FpGYRLbNdO0/UF91HlCqJBI/AAAAAAAAAC4/eil1K7dIPQE/s320/pie-hover-segment-emphasized.png" width="320" /></a></div><br /></div>
<h2>Comments</h2>
<div class='comments'>
</div>
